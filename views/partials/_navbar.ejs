<div class="container-fluid sticky-top bg-white shadow-sm">
  <div class="container">
    <nav class="navbar navbar-expand-lg bg-white navbar-light py-3 py-lg-0">
      <a href="/" class="navbar-brand">
        <img src="/img/damv.png" alt="Medinova Logo">
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarCollapse">
        <div class="navbar-nav ms-auto py-0">

          <a href="/" class="nav-item nav-link <%=link==="index" && "active" %>"><%=resources.home%></a>
          <a href="/about" class="nav-item nav-link <%=link==="about" && "active" %>"><%=resources.about%></a>
          <a href="/joinUs" class="nav-item nav-link <%=link==="joinUs" && "active" %>"><%=resources.joinUs%></a>

          <a href="/members" class="nav-item nav-link <%=link==="members" && "active" %>"><%=resources.reyaset%></a>
          <a href="/allMembers" class="nav-item nav-link <%=link==="allMembers" && "active" %>"><%=resources.uzvluk%>
          </a>

          <a href="/news" class="nav-item nav-link <%=link==="news" && "active" %>"><%=resources.news%></a>
          <a href="/projects" class="nav-item nav-link <%=link==="projects" && "active" %>"><%=resources.project%></a>


          <% if (user) { %>
            <% if (user.role === "rehber_uzv" || user.role === "reyaset_heyyyeti_uzvleri") { %>
              <a href="/users/dashboard" class="nav-item nav-link <%= link === 'dashboard' ? 'active' : '' %>">
                <%= resources.dashboard %>
              </a>
              
              <a href="/logout" class="nav-item nav-link">
                <%= resources.logout %>
              </a>
            <% } else if (user.role === "admin") { %>
              <a href="/admin" class="nav-item nav-link">Admin</a>
              
              <a href="/logout" class="nav-item nav-link">
                <%= resources.logout %>
              </a>
            <% } else { %>
              <a href="/logout" class="nav-item nav-link">
                <%= resources.logout %>
              </a>
            <% } %>
          <% } else { %>
            <a href="/login" class="nav-item nav-link <%= link === 'login' ? 'active' : '' %>">
              <%= resources.login %>
            </a>
          <% } %>
                        <!--  -->


                        <div class="nav-item dropdown">
                          <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"><span
                              class="<%=resources.iconLink%>"></span>
                            <%=resources.language%>
                          </a>
                          <div class="dropdown-menu m-0">
                            <a href="" class="dropdown-item changeLang" onclick="changeLanguage('az')"><span
                                class="fi fi-az"></span> Az</a>
                            <a href="" class="dropdown-item changeLang" onclick="changeLanguage('de')"><span
                                class="fi fi-de"></span> De</a>
                          </div>
                        </div>

        </div>
      </div>
    </nav>
  </div>
</div>
<script>

  function changeLanguage(lang) {
    var currentUrl = encodeURIComponent(window.location.href);

    // Modify the href attribute of each dropdown item
    var dropdownItems = document.getElementsByClassName('changeLang');
    for (var i = 0; i < dropdownItems.length; i++) {
      var dropdownItem = dropdownItems[i];
      var returnUrl = dropdownItem.getAttribute('data-lang') === lang ? currentUrl : 'CurentUrl';
      var modifiedUrl = '/changeLanguage?lang=' + lang + '&returnUrl=' + currentUrl;
      dropdownItem.setAttribute('href', modifiedUrl);
    }

    // // Toggle dropdown menu
    // var dropdownMenu = document.querySelector('.custom-dropdown-menu');
    // var dropdownToggle = document.querySelector('.custom-dropdown-toggle');
    // dropdownMenu.classList.toggle('show');
    // dropdownToggle.setAttribute('aria-expanded', dropdownMenu.classList.contains('show'));
  }

  // Close dropdown menu when clicking outside
  // document.addEventListener('click', function (event) {
  //   var dropdownToggle = document.querySelector('.custom-dropdown-toggle');
  //   var dropdownMenu = document.querySelector('.custom-dropdown-menu');

  //   if (!dropdownToggle.contains(event.target)) {
  //     dropdownMenu.classList.remove('show');
  //     dropdownToggle.setAttribute('aria-expanded', 'false');
  //   }
  // });
</script>
<style>
  .navbar-brand img {
    width: 160px !important;
    /* Logo genişliği */
    height: 60px !important;
    /* Logo yüksekliği otomatik olarak ayarlanır */
    margin-right: 10px !important;
    /* İsteğe bağlı: Logo ile metin arasında sağ boşluk */
  }

  .navbar-nav .nav-link {
    font-size: 14px;
  }

  .custom-dropdown-toggle {
    background: none;
    border: none;
    color: #000;
    padding: 0;
    cursor: pointer;
  }

  .custom-dropdown-menu {
    border: none;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  }

  .dropdown-menu {
    min-width: 5rem !important;
  }

  .language-dropdown-item {
    display: flex;
    align-items: center;
    padding: 8px 16px;
    font-size: 14px;
    color: #000;
    text-decoration: none;
    transition: background-color 0.3s ease;
  }

  .language-dropdown-item:hover {
    background-color: #f8f9fa;
  }
</style>