
<%- include("partials/_header") %>
 <!-- Topbar Start -->
 <%- include("partials/_topbar") %>

 <!-- Topbar End -->

 <%- include("partials/_navbar") %>
 <!-- Navbar Start -->


<div class="container d-flex justify-content-center">
  <div class="col-4">
 
<% if (typeof error !== 'undefined' && error !== null) { %>
  <div class="alert alert-danger mt-3" role="alert">
    <%= error %>
  </div>
<% } %>

<% if (typeof success !== 'undefined' && success !== null) { %>
  <div class="alert alert-success mt-3" role="alert">
    <%= success %>
 </div>  
 <% if (redirectAfterSuccess) { %>
  <script>
    setTimeout(() => {
      window.location.href = '<%= redirectAfterSuccess %>';
    }, 3000);
  </script>
<% } %>
<% } %>   
    <form action="/users/changePassword" method="post" class="form m-5">
      <input value="<%=data.token%>" type="hidden" name="token">
        <div class="form-group m-1 p-1">
          <input required="required" minlength="5" placeholder="<%=resources.newPassword%>" type="password" name="newPassword" id="password" class="form-control bg-light border-0"  >
        </div>
        <div class="form-group m-1 p-1">
          <input required="required" minlength="5" placeholder="<%=resources.confirmPassword%>" type="password" name="confirmPassword" id="confirmPassword" class="form-control bg-light border-0">
        </div>
        
        <div class="form-control m-1 p-1">
          <button type="submit" class="btn btn-primary w-100 py-3"><%=resources.changePassword%></button>
          
        </div>
      </form>
  </div>
  
    </div>
      <!-- <script>
        const passwordInput = document.getElementById('password');
        const confirmPasswordInput = document.getElementById('confirmPassword');
      
        confirmPasswordInput.addEventListener('input', () => {
          const password = passwordInput.value;
          const confirmPassword = confirmPasswordInput.value;
      
          if (password !== confirmPassword) {
            confirmPasswordInput.setCustomValidity('Passwords do not match');
          } else {
            confirmPasswordInput.setCustomValidity('');
          }
        });
      </script> -->
      
    




<%- include("partials/_footer") %>

    
<script>
 var isDarkMode = localStorage.getItem("darkMode") === "true";
        
        // Dark mode geçişini işleyen fonksiyon
        function toggleDarkMode() {
          var body = document.body;
        
          if (isDarkMode) {
            // Light mode ayarları
            body.classList.remove("dark-mode");
            isDarkMode = false;
            darkModeIcon.classList.remove('fa-sun')
            darkModeIcon.classList.add('fa-moon')  
            logoImage.src = '/img/damv.png';
        } else {
            // Dark mode ayarları
            body.classList.add("dark-mode");
            isDarkMode = true;
            darkModeIcon.classList.remove('fa-moon')
              darkModeIcon.classList.add('fa-sun')
              logoImage.src = '/img/damv2.png';
          }
        
          // Dark mode tercihini yerel depolamada güncelle
          localStorage.setItem("darkMode", isDarkMode);
        }
        

        
        // Sayfa yüklendiğinde dark mode tercihine göre sayfayı güncelle
        window.addEventListener("load", function() {
          var body = document.body;
        
          if (isDarkMode) {
            body.classList.add("dark-mode");
            darkModeIcon.classList.remove('fa-moon')
              darkModeIcon.classList.add('fa-sun')
              logoImage.src = '/img/damv2.png';
          }
        });
</script>